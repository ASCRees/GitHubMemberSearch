@using GitHubMemberSearch.Models
@model GitHubUserViewSearchModel
<br />
@using (Html.BeginForm("Search", "Home", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    <table>
        <tr>
            <td>
                Enter User Name
                @Html.TextBoxFor(m => m.UserNameSearch, new { id = "userName" })
                @Html.ValidationMessageFor(m => m.UserNameSearch, null, new { @class = "field-validation-error", data_valmsg_for = "UserNameSearch" })

                <input type="submit" name="Search" value="Search" />
            </td>
        </tr>
    </table>
}
@if (Model.UserViewModel != null)
{
    if (Model.UserViewModel[0].Id > 0)
    {
        foreach (var user in Model.UserViewModel)
        {
            <br />
            <br />
            <table class="table" id="userDetailsTable">
                <tr>
                    <th>Name</th>
                    <td>@Html.DisplayFor(model => user.Name)</td>
                </tr>
                <tr>
                    <th>Location</th>
                    <td>@Html.DisplayFor(model => user.Location)</td>
                </tr>
                <tr>
                    <th>Avatar</th>
                    <td><img src="@(user.AvatarUrl)" height="100px;" /></td>
                </tr>
            </table>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Full Name</th>
                        <th>Description</th>
                        <th>Stargazers</th>
                    </tr>
                </thead>
                <tbody>
                    @if (user.ReposItems.Count.Equals(0))
                    {
                        <tr>
                            <td colspan="4" style="color:red">
                                The user does not have any repository items
                            </td>
                        </tr>
                    }
                    else
                    {
                        foreach (var item in user.ReposItems)
                        {
                            <tr>
                                <td>
                                    <a href="@(item.HtmlUrl)" target="_blank">@Html.DisplayFor(model => item.Name)</a>
                                </td>
                                <td>@Html.DisplayFor(model => item.FullName)</td>
                                <td>@Html.DisplayFor(model => item.Description)</td>
                                <td>@Html.DisplayFor(model => item.StargazersCount)</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        }
    }
    else if (!string.IsNullOrWhiteSpace(Model.UserViewModel[0].Message))
    {
        <br />
        <table class="table" id="userDetailsTable">
            <tr>
                <td style="color:red">@Model.UserViewModel[0].Message</td>
            </tr>
        </table>

    }
}
@section scripts{
    @Scripts.Render("~/bundles/jqueryval")
}